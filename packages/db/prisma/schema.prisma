// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client"
  output   = "./generated"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model GlobalSettings {
  id              String   @id @default(auto()) @map("_id") @db.ObjectId
  guildId         String
  ignoredChannels String[] @default([])
  ignoredUsers    String[] @default([])

  @@unique([guildId])
}

model Settings {
  id              String      @id @default(auto()) @map("_id") @db.ObjectId
  guildId         String
  channelId       String
  ignoredChannels String[]    @default([])
  ignoredUsers    String[]    @default([])
  watchingEvents  EventType[] @default([])
  watchChannels   String[]    @default([])
  watchUsers      String[]    @default([])

  @@unique([guildId, channelId])
}

model Session {
  id           String @id @default(auto()) @map("_id") @db.ObjectId
  sessionToken String @unique
  userId       String
}

enum EventType {
  guildUpdateName
  guildUpdateDescription
  guildUpdateIcon
  guildUpdateSplash
  guildUpdateDiscoverySplash
  guildUpdateBanner
  guildUpdateOwner
  guildUpdateRegion
  guildUpdatePreferredLocale
  guildUpdateAfkChannel
  guildUpdateAfkTimeout
  guildUpdateRulesChannel
  guildUpdatePublicUpdatesChannel
  guildUpdateSafetyAlertsChannel
  guildUpdateMfaLevel
  guildUpdateVerificationLevel
  guildUpdateExplicitContentFilter
  guildUpdateDefaultMessageNotifications
  guildUpdateVanityUrlCode
  guildUpdatePremiumProgressBarEnabled
  guildUpdateWidgetEnabled
  guildUpdateWidgetChannel
  guildUpdateSystemChannelFlags
  guildUpdateSystemChannel
  channelCreate
  channelUpdateName
  channelUpdateType
  channelUpdateTopic
  channelUpdateNsfw
  channelUpdateBitrate
  channelUpdateUserLimit
  channelUpdateRateLimitPerUser
  channelUpdatePosition
  channelUpdatePermissionOverwrites
  channelUpdateDefaultAutoArchiveDurations
  channelDelete
  memberKick
  memberBanAdd
  memberBanRemove
  memberPrune
  memberUpdateNick
  memberUpdateDeaf
  memberUpdateMute
  memberUpdateAvatar
  memberUpdateTimeout
  memberRoleUpdate
  memberMove
  memberDisconnect
  botAdd
  roleCreate
  roleUpdateName
  roleUpdateColor
  roleUpdateHoist
  roleUpdateMentionable
  roleUpdatePermissions
  roleDelete
  inviteCreate
  inviteUpdateCode
  inviteUpdateChannel
  inviteUpdateInviter
  inviteUpdateMaxUses
  inviteUpdateMaxAge
  inviteUpdateTemporary
  inviteUpdateUses
  inviteDelete
}
